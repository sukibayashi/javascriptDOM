<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.6函数</title>
</head>

<body>
    <script>
        // 如果需要多次使用同一段代码，可以把它们封装成一个函数。
        // 函数（function）就是一组允许在你的代码里随时调用的语句。事实上，每一个函数实际上是一个短小的脚本。
        // 作为一种良好的变成习惯，应该现对函数做出定义再调用它们。
        function shout() {
            var beatles = Array("John", "Paul", "George", "Ringo");
            for (var count = 0; count < beatles.length; count++) {
                alert(beatles[count]);
            }
        }

        // 这个函数里的循环语句将依次弹出对话框来显示 Beatles 乐队成员的名字。现在，如果想在自己的脚本里执行这一动作，可以随时使用如下语句来调用这个函数：
        shout();
        // 每当需要反复做一件事时，都可以利用函数来避免重复键入大量的相同内容。不过，函数的真正威力体现在，你可以把不同的数据传递给它们，而它们将使用这些数据去完成预定的操作。
        // 我们把传递给函数的数据称为参数(argument)
        // 定义一个函数的语法:
        function name(argument) {
            statements;
        }
    </script>

    <script>
        // JavaScript提供了许多内建函数, 在前面多次出现过的alert就是一个例子. 这个函数需要我们提供一个函数,它将弹出一个对话框来显示这个参数的值.
        // 在定义函数时, 你可以为它声明任意多个参数, 只要用逗号把它们 分隔开来就行. 在函数的内部, 你可以像使用普通变量那样使用它的任何一个参数.

        // 下面是一个需要传递两个参数的函数. 如果把两个数值传递给这个函数, 这个函数将对他们进行乘法运算
        function multiply(num1, num2) {
            var total = num1 * num2;
            alert(total);
        }
        // 在这个定义了这个函数的脚本里, 我们可以从任意位置去调用这个函数:
        multiply(10, 2);
        // 如果把数值 10, 2 传递给了 multipyly() 函数的结果就会表示20
    </script>

    <script>
        // 这将产生这样一种视觉效果: 屏幕上会立刻弹出一个现实乘法运算结果 (20) 的 alert 对话框. 如果这函数能把结果返回给调用这个函数的语句往往会更有用. 这很容易做到:
        // 函数不仅能够 (以参数的形式) 接受数据, 还能够返回数据.
        // 我们完全可以创建一个函数并让它返回一个数值、 一个字符串、 一个数组或一个布尔值. 这个需要用到 return 语句:
        function multiply(num1, num2) {
            var total = num1 * num2;
            return total;
        }

        // 下面这个函数只有一个参数 (一个华氏温度值), 它将返回一个数值(同一温度的摄氏温度值):
        function convertToCelsius(temp) {
            var result = temp - 32;
            result = result / 1.8;
            return result;
        }

        // 函数的真正价值体现在, 我们还可以把它们当做一种数据类型来使用, 这意味着可以把一个函数调用结果赋给一个变量;
        var temp_fahremheit = 95;
        var temp_celsius = convertToCelsius(temp_fahremheit);
        alert(temp_celsius);

        // 個人メモ：
        // ↑整个运算大致是显示命名了一个为convertToCelsius(temp)的函数,这个函数会做result = result(变量) / 1.8的这个函数公式
        // 第二段变量中的 temp_celsius 其实就等于第一段中的 result , 只不过第二段给 temp = temp_fahremheit = 95设定了变量
        // 所以就会变成 temp_fahremheit( 95 ) - 32 = result = 63 / 1.8 = 35 = alert(temp_celsius);

        // 了解如何应该如何命名变量和函数.
        // 在命名变量时, 我用下划线来分隔各个单词; 在命名函数时, 我从第二个单词开始把每个单词的第一个字母大写形式(也就是所谓的驼峰式命名法). 
        // 这么做事为了能够第一眼看出哪些名字是变量, 哪些名字是函数. 与变量的情况一样, JavaScript 语言也不允许函数的名字里包含空格. 驼峰命名法可以在不违反这一规定的前提下, 把变量和函数的名字以一种既简单又明确的方式区分开来.
    </script>

    <!-- 变量的作用域 -->
    <script>
        // 作为一种好的变成习惯, 在第一次对某个变量赋值时应该用 var 对其作出声明. 当在函数内部使用变量时, 就更应该这么做.
        // 变量既可以是全聚德, 也可以是局部的. 在谈论全局变量和局部变量之间的区别时, 我们其实在讨论变量的作用域( scope )>.

        // 全局变量 (global variable) 可以在脚本中的任何位置被引用. 一旦你在某个脚本里声明了一个全局变量, 就可以从这个脚本中的任何位置----包括函数内部----引用它. 全局变量的作用域是整个脚本.

        // 局部变量 (local variable) 只存在于声明它的那个函数的内部, 在那个函数的外部是无法引用它的. 局部变量的作用域仅限于某个特定的函数.
        // 因此，我们在函数里既可以使用全局变量, 也可以使用局部变量. 这很有用, 但它也会导致一些问题. 如果在一个函数的内部不小心使用了某个全局变量的名字, 即使本意是想使用一个局部变量, JavaScript 也会认为是在引用那个全局变量.

        // 幸运的是, 可以用 var 关键字明确地为函数变量设定作用域.
        // 如果在某个函数中使用了 var, 那个变量就将被视为一个局部变量, 它只存在于这个函数的上下文中; 反之, 如果没有使用 var, 那个变量就将被视为一个全局变量, 如果脚本里已经存在一个与之同名的全局变量, 这个函数就会改变那个全局变量的值.
        function square(num) {
            total = num * num;
            return total;
        }
        var total = 50;
        var number = square(20);
        alert(total);
        // 这些代码将不可避免地导致全局变量 total 的值发生变化, alert 400.
        // 全局变量 total 的值变成了400. 本意是让 square()函数只是把它计算出来的平方值返回给变量 number, 但因为未把这个函数内部的 total 变量明确的声明未局部变量, 这个函数把名字是 total的那个全局变量的值也改变了.
        // 把这个函数写成如下所示的样子才是正确的:
        function square(num) {
            var total = num * num;
            return total;
        }
        // 现在, 全局变量 total 变得安全了, 再怎么调用 square()函数也不会影响到它.
        // 切记, 函数在行为方面应该像一个自给自足的脚本, 在定义一个函数时, 我们一定要把它内部的变量全都明确地声明为局部变量.
        // 如果总是在函数里使用 var 关键字来定义变量, 就能避免任何形式的二义性隐患.
    </script>
</body>

</html>